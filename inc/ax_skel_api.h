/**************************************************************************************************
 *
 * Copyright (c) 2019-2023 Axera Semiconductor (Ningbo) Co., Ltd. All Rights Reserved.
 *
 * This source file is the property of Axera Semiconductor (Ningbo) Co., Ltd. and
 * may not be copied or distributed in any isomorphic form without the prior
 * written consent of Axera Semiconductor (Ningbo) Co., Ltd.
 *
 **************************************************************************************************/

#ifndef SKEL_AX_SKEL_API_H
#define SKEL_AX_SKEL_API_H

#include "ax_global_type.h"
#include "ax_skel_type.h"
#include "ax_skel_err.h"

#ifdef __cplusplus
extern "C" {
#endif

//////////////////////////////////////////////////////////////////////////////////////
/// @brief Initialize skel sdk
///
/// @param pstParam   [I]: initialize parameter
///
/// @return 0 if success, otherwise failure
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_Init(const AX_SKEL_INIT_PARAM_T *pstParam);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief uninitialize skel sdk
///
/// @param NA
///
/// @return 0 if success, otherwise failure
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_DeInit(AX_VOID);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief get capability
///
/// @param ppstCapability [O]: Capability
///
/// @return version info
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_GetCapability(const AX_SKEL_CAPABILITY_T **ppstCapability);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief get version
///
/// @param NA
///
/// @return version info
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_GetVersion(const AX_SKEL_VERSION_INFO_T **ppstVersion);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief create handle
///
/// @param pstParam   [I]: handle parameter
/// @param handle     [O]: handle
///
/// @return 0 if success, otherwise failure
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_Create(const AX_SKEL_HANDLE_PARAM_T *pstParam, AX_SKEL_HANDLE *pHandle);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief destroy handle
///
/// @param pHandle    [I]: handle
///
/// @return 0 if success, otherwise failure
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_Destroy(AX_SKEL_HANDLE handle);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief get config
///
/// @param pstConfig           [I/O]: config
///
/// @return version info
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_GetConfig(AX_SKEL_HANDLE handle, const AX_SKEL_CONFIG_T **ppstConfig);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief set config
///
/// @param pstConfig           [I]: config
///
/// @return version info
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_SetConfig(AX_SKEL_HANDLE handle, const AX_SKEL_CONFIG_T *pstConfig);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief register get algorithm result callback
///
/// @param pHandle    [I]: handle
/// @param callback   [I]: callback function
/// @param pUserData  [I]: private user data
///
/// @return 0 if success, otherwise failure
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_RegisterResultCallback(AX_SKEL_HANDLE handle, AX_SKEL_RESULT_CALLBACK_FUNC callback, AX_VOID *pUserData);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief send frame
///
/// @param pHandle    [I]: handle
/// @param pstImage   [I]: image
/// @param ppstResult [O]: algorithm result
///
/// @return 0 if success, otherwise failure
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_SendFrame(AX_SKEL_HANDLE handle, const AX_SKEL_FRAME_T *pstFrame, AX_S32 nTimeout);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief process image
///
/// @param pHandle    [I]: handle
/// @param ppstResult [O]: algorithm result
/// @param nTimeout   [I]: timeout
///
/// @return 0 if success, otherwise failure
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_GetResult(AX_SKEL_HANDLE handle, AX_SKEL_RESULT_T **ppstResult, AX_S32 nTimeout);

//////////////////////////////////////////////////////////////////////////////////////
/// @brief free memory
///
/// @param p           [I]: memory address
///
/// @return 0 if success, otherwise failure
//////////////////////////////////////////////////////////////////////////////////////
AX_S32 AX_SKEL_Release(AX_VOID *p);

#ifdef __cplusplus
}
#endif

#endif //SKEL_AX_SKEL_API_H
